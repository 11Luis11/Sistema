{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/luist/OneDrive/Documentos/Ga/Sistema/lib/database.ts"],"sourcesContent":["// Neon database connection\r\nimport { neon } from '@neondatabase/serverless';\r\n\r\nif (!process.env.DATABASE_URL) {\r\n  throw new Error('DATABASE_URL environment variable is not set');\r\n}\r\n\r\nconst sql = neon(process.env.DATABASE_URL!);\r\n\r\nexport { sql };\r\n"],"names":[],"mappings":"AAAA,2BAA2B;;;;;AAC3B;;AAEA,IAAI,CAAC,QAAQ,GAAG,CAAC,YAAY,EAAE;IAC7B,MAAM,IAAI,MAAM;AAClB;AAEA,MAAM,MAAM,IAAA,gKAAI,EAAC,QAAQ,GAAG,CAAC,YAAY"}},
    {"offset": {"line": 56, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/luist/OneDrive/Documentos/Ga/Sistema/lib/security/input-validation.ts"],"sourcesContent":["import { z } from 'zod';\r\n\r\nexport const LoginSchema = z.object({\r\n  email: z.string().email('Invalid email format').toLowerCase().trim(),\r\n  password: z.string().min(8, 'Password must be at least 8 characters'),\r\n});\r\n\r\nexport const ProductSchema = z.object({\r\n  code: z.string().min(1).max(50).toUpperCase().trim(),\r\n  name: z.string().min(1).max(255).trim(),\r\n  description: z.string().max(1000).trim().optional(),\r\n  categoryId: z.number().positive(),\r\n  price: z.number().positive('Price must be positive'),\r\n  size: z.string().max(50).trim().optional(),\r\n  color: z.string().max(100).trim().optional(),\r\n  gender: z.string().max(50).trim().optional(),\r\n  stock: z.number().int().nonnegative('Stock cannot be negative').default(0),\r\n});\r\n\r\nexport type LoginInput = z.infer<typeof LoginSchema>;\r\nexport type ProductInput = z.infer<typeof ProductSchema>;\r\n\r\nexport function validateLogin(data: unknown) {\r\n  return LoginSchema.safeParse(data);\r\n}\r\n\r\nexport function validateProduct(data: unknown) {\r\n  return ProductSchema.safeParse(data);\r\n}\r\n\r\nexport function validateEmail(email: string): boolean {\r\n  const emailSchema = z.string().email();\r\n  const result = emailSchema.safeParse(email.toLowerCase().trim());\r\n  return result.success;\r\n}\r\n\r\nexport function sanitizeString(input: string): string {\r\n  return input.replace(/[<>\\\"'&]/g, (char) => {\r\n    const map: { [key: string]: string } = {\r\n      '<': '&lt;',\r\n      '>': '&gt;',\r\n      '\"': '&quot;',\r\n      \"'\": '&#x27;',\r\n      '&': '&amp;',\r\n    };\r\n    return map[char];\r\n  });\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;AAEO,MAAM,cAAc,yKAAC,CAAC,MAAM,CAAC;IAClC,OAAO,yKAAC,CAAC,MAAM,GAAG,KAAK,CAAC,wBAAwB,WAAW,GAAG,IAAI;IAClE,UAAU,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;AAC9B;AAEO,MAAM,gBAAgB,yKAAC,CAAC,MAAM,CAAC;IACpC,MAAM,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,IAAI,WAAW,GAAG,IAAI;IAClD,MAAM,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,KAAK,IAAI;IACrC,aAAa,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM,IAAI,GAAG,QAAQ;IACjD,YAAY,yKAAC,CAAC,MAAM,GAAG,QAAQ;IAC/B,OAAO,yKAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC3B,MAAM,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,IAAI,IAAI,GAAG,QAAQ;IACxC,OAAO,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,KAAK,IAAI,GAAG,QAAQ;IAC1C,QAAQ,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,IAAI,IAAI,GAAG,QAAQ;IAC1C,OAAO,yKAAC,CAAC,MAAM,GAAG,GAAG,GAAG,WAAW,CAAC,4BAA4B,OAAO,CAAC;AAC1E;AAKO,SAAS,cAAc,IAAa;IACzC,OAAO,YAAY,SAAS,CAAC;AAC/B;AAEO,SAAS,gBAAgB,IAAa;IAC3C,OAAO,cAAc,SAAS,CAAC;AACjC;AAEO,SAAS,cAAc,KAAa;IACzC,MAAM,cAAc,yKAAC,CAAC,MAAM,GAAG,KAAK;IACpC,MAAM,SAAS,YAAY,SAAS,CAAC,MAAM,WAAW,GAAG,IAAI;IAC7D,OAAO,OAAO,OAAO;AACvB;AAEO,SAAS,eAAe,KAAa;IAC1C,OAAO,MAAM,OAAO,CAAC,aAAa,CAAC;QACjC,MAAM,MAAiC;YACrC,KAAK;YACL,KAAK;YACL,KAAK;YACL,KAAK;YACL,KAAK;QACP;QACA,OAAO,GAAG,CAAC,KAAK;IAClB;AACF"}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/luist/OneDrive/Documentos/Ga/Sistema/lib/security/rate-limit.ts"],"sourcesContent":["import NodeCache from 'node-cache';\r\n\r\ninterface RateLimitConfig {\r\n  windowMs: number; // Time window in milliseconds\r\n  maxRequests: number; // Max requests per window\r\n}\r\n\r\nconst DEFAULT_CONFIG: RateLimitConfig = {\r\n  windowMs: 60 * 1000, // 1 minute\r\n  maxRequests: 30,\r\n};\r\n\r\nclass RateLimiter {\r\n  private cache = new NodeCache({ stdTTL: 60, checkperiod: 30 });\r\n  private config: RateLimitConfig;\r\n\r\n  constructor(config: Partial<RateLimitConfig> = {}) {\r\n    this.config = { ...DEFAULT_CONFIG, ...config };\r\n  }\r\n\r\n  check(identifier: string): { allowed: boolean; remaining: number } {\r\n    const key = `ratelimit:${identifier}`;\r\n    let count = this.cache.get<number>(key) || 0;\r\n\r\n    if (count >= this.config.maxRequests) {\r\n      return {\r\n        allowed: false,\r\n        remaining: 0,\r\n      };\r\n    }\r\n\r\n    count += 1;\r\n    this.cache.set(key, count, Math.ceil(this.config.windowMs / 1000));\r\n\r\n    return {\r\n      allowed: true,\r\n      remaining: this.config.maxRequests - count,\r\n    };\r\n  }\r\n\r\n  reset(identifier: string): void {\r\n    this.cache.del(`ratelimit:${identifier}`);\r\n  }\r\n}\r\n\r\nexport const apiLimiter = new RateLimiter({\r\n  windowMs: 15 * 60 * 1000, // 15 minutes\r\n  maxRequests: 100,\r\n});\r\n\r\nexport const loginLimiter = new RateLimiter({\r\n  windowMs: 15 * 60 * 1000, // 15 minutes\r\n  maxRequests: 10,\r\n});\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAOA,MAAM,iBAAkC;IACtC,UAAU,KAAK;IACf,aAAa;AACf;AAEA,MAAM;IACI,QAAQ,IAAI,mJAAS,CAAC;QAAE,QAAQ;QAAI,aAAa;IAAG,GAAG;IACvD,OAAwB;IAEhC,YAAY,SAAmC,CAAC,CAAC,CAAE;QACjD,IAAI,CAAC,MAAM,GAAG;YAAE,GAAG,cAAc;YAAE,GAAG,MAAM;QAAC;IAC/C;IAEA,MAAM,UAAkB,EAA2C;QACjE,MAAM,MAAM,CAAC,UAAU,EAAE,YAAY;QACrC,IAAI,QAAQ,IAAI,CAAC,KAAK,CAAC,GAAG,CAAS,QAAQ;QAE3C,IAAI,SAAS,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE;YACpC,OAAO;gBACL,SAAS;gBACT,WAAW;YACb;QACF;QAEA,SAAS;QACT,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,OAAO,KAAK,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG;QAE5D,OAAO;YACL,SAAS;YACT,WAAW,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG;QACvC;IACF;IAEA,MAAM,UAAkB,EAAQ;QAC9B,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,UAAU,EAAE,YAAY;IAC1C;AACF;AAEO,MAAM,aAAa,IAAI,YAAY;IACxC,UAAU,KAAK,KAAK;IACpB,aAAa;AACf;AAEO,MAAM,eAAe,IAAI,YAAY;IAC1C,UAAU,KAAK,KAAK;IACpB,aAAa;AACf"}},
    {"offset": {"line": 182, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/luist/OneDrive/Documentos/Ga/Sistema/app/api/products/%5Bid%5D/route.ts"],"sourcesContent":["import { sql } from '@/lib/database';\r\nimport { validateProduct } from '@/lib/security/input-validation';\r\nimport { apiLimiter } from '@/lib/security/rate-limit';\r\nimport { NextRequest, NextResponse } from 'next/server';\r\n// ... (mantén todo lo demás igual)\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const ip = request.headers.get('x-forwarded-for') || 'unknown';\r\n    const rateLimitCheck = apiLimiter.check(`products:get:${ip}`);\r\n\r\n    if (!rateLimitCheck.allowed) {\r\n      return NextResponse.json(\r\n        { success: false, message: 'Rate limit exceeded' },\r\n        { status: 429 }\r\n      );\r\n    }\r\n\r\n    const { searchParams } = new URL(request.url);\r\n    const search = searchParams.get('search') || '';\r\n    const categoryId = searchParams.get('categoryId');\r\n    const limit = parseInt(searchParams.get('limit') || '100');\r\n    const offset = parseInt(searchParams.get('offset') || '0');\r\n\r\n    const searchPattern = `%${search}%`;\r\n    const category = categoryId ? parseInt(categoryId) : null;\r\n\r\n    // Construcción de query con active = true\r\n    let whereConditions = sql`p.active = true`;\r\n    \r\n    if (search) {\r\n      whereConditions = sql`${whereConditions} AND (p.name ILIKE ${searchPattern} OR p.code ILIKE ${searchPattern})`;\r\n    }\r\n    \r\n    if (category) {\r\n      whereConditions = sql`${whereConditions} AND p.category_id = ${category}`;\r\n    }\r\n\r\n    const products = await sql`\r\n      SELECT \r\n        p.id, p.code, p.name, p.description, p.price, p.current_stock,\r\n        p.size, p.color, p.gender, c.name AS category,\r\n        p.created_at, p.updated_at\r\n      FROM products p\r\n      INNER JOIN categories c ON p.category_id = c.id\r\n      WHERE ${whereConditions}\r\n      ORDER BY p.created_at DESC\r\n      LIMIT ${limit}\r\n      OFFSET ${offset}\r\n    `;\r\n\r\n    return NextResponse.json({ success: true, products });\r\n  } catch (error) {\r\n    console.error('[Products GET Error]', error);\r\n    return NextResponse.json(\r\n      { success: false, message: 'Error fetching products', error_code: 'FETCH_ERROR' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n// ... (mantén POST y DELETE igual)\r\nfunction getRoleFromRequest(request: NextRequest): string | null {\r\n  return request.headers.get('X-User-Role') || null;\r\n}\r\n\r\nfunction getUserIdFromRequest(request: NextRequest): number | null {\r\n  const userIdHeader = request.headers.get('X-User-Id');\r\n  return userIdHeader ? parseInt(userIdHeader) : null;\r\n}\r\n\r\nexport async function PUT(\r\n  request: NextRequest,\r\n  { params }: { params: Promise<{ id: string }> }\r\n) {\r\n  try {\r\n    const { id } = await params;\r\n\r\n    const ip = request.headers.get('x-forwarded-for') || 'unknown';\r\n    const rateLimitCheck = apiLimiter.check(`products:put:${ip}`);\r\n\r\n    if (!rateLimitCheck.allowed) {\r\n      return NextResponse.json(\r\n        { success: false, message: 'Rate limit exceeded' },\r\n        { status: 429 }\r\n      );\r\n    }\r\n\r\n    const role = getRoleFromRequest(request);\r\n\r\n    if (!['Administrator', 'Manager'].includes(role || '')) {\r\n      return NextResponse.json(\r\n        { success: false, message: 'Unauthorized: insufficient permissions', error_code: 'UNAUTHORIZED' },\r\n        { status: 403 }\r\n      );\r\n    }\r\n\r\n    const userId = getUserIdFromRequest(request);\r\n    if (!userId) {\r\n      return NextResponse.json(\r\n        { success: false, message: 'User ID required', error_code: 'USER_ID_REQUIRED' },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const body = await request.json();\r\n    \r\n    console.log('[DEBUG PUT] Received data:', body);\r\n\r\n    const validation = validateProduct(body);\r\n\r\n    if (!validation.success) {\r\n      return NextResponse.json(\r\n        {\r\n          success: false,\r\n          message: 'Invalid product data',\r\n          errors: validation.error.flatten(),\r\n          error_code: 'VALIDATION_ERROR',\r\n        },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const { name, description, categoryId, price, size, color, gender, stock } = validation.data;\r\n\r\n    const priceNum = Number(price);\r\n    const categoryNum = Number(categoryId);\r\n    const idNum = Number(id);\r\n    const newStock = stock !== undefined ? Number(stock) : null;\r\n\r\n    console.log('[DEBUG PUT] Processing update for product:', idNum);\r\n\r\n    // Obtener stock actual antes de actualizar\r\n    const currentProduct = await sql`\r\n      SELECT current_stock FROM products WHERE id = ${idNum} AND active = true\r\n    `;\r\n\r\n    if (currentProduct.length === 0) {\r\n      return NextResponse.json(\r\n        { success: false, message: 'Product not found', error_code: 'NOT_FOUND' },\r\n        { status: 404 }\r\n      );\r\n    }\r\n\r\n    const previousStock = currentProduct[0].current_stock;\r\n\r\n    // Actualizar producto\r\n    let result;\r\n    if (newStock !== null) {\r\n      result = await sql`\r\n        UPDATE products \r\n        SET name = ${name},\r\n            description = ${description || ''},\r\n            category_id = ${categoryNum},\r\n            price = ${priceNum},\r\n            size = ${size || ''},\r\n            color = ${color || ''},\r\n            gender = ${gender || ''},\r\n            current_stock = ${newStock},\r\n            updated_at = NOW()\r\n        WHERE id = ${idNum} AND active = true\r\n        RETURNING *\r\n      `;\r\n    } else {\r\n      result = await sql`\r\n        UPDATE products \r\n        SET name = ${name},\r\n            description = ${description || ''},\r\n            category_id = ${categoryNum},\r\n            price = ${priceNum},\r\n            size = ${size || ''},\r\n            color = ${color || ''},\r\n            gender = ${gender || ''},\r\n            updated_at = NOW()\r\n        WHERE id = ${idNum} AND active = true\r\n        RETURNING *\r\n      `;\r\n    }\r\n\r\n    console.log('[DEBUG PUT] Product updated:', result[0]);\r\n\r\n    // Registrar movimiento si cambió el stock\r\n    if (newStock !== null && previousStock !== newStock) {\r\n      const quantity = newStock - previousStock;\r\n      const movementType = quantity > 0 ? 'ENTRADA' : 'SALIDA';\r\n      \r\n      await sql`\r\n        INSERT INTO inventory_movements (\r\n          product_id, user_id, movement_type, quantity, previous_stock, new_stock, reason\r\n        )\r\n        VALUES (\r\n          ${idNum}, ${userId}, ${movementType}, ${Math.abs(quantity)}, ${previousStock}, ${newStock}, 'Ajuste de inventario desde edición de producto'\r\n        )\r\n      `;\r\n\r\n      console.log('[DEBUG PUT] Movement created:', movementType, Math.abs(quantity));\r\n    }\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      product: result[0],\r\n      message: 'Product updated successfully',\r\n    });\r\n  } catch (error) {\r\n    console.error('[Update Product Error]', error);\r\n    return NextResponse.json(\r\n      { success: false, message: 'Error updating product', error_code: 'UPDATE_ERROR' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function DELETE(\r\n  request: NextRequest,\r\n  { params }: { params: Promise<{ id: string }> }\r\n) {\r\n  try {\r\n    const { id } = await params;\r\n\r\n    const ip = request.headers.get('x-forwarded-for') || 'unknown';\r\n    const rateLimitCheck = apiLimiter.check(`products:delete:${ip}`);\r\n\r\n    if (!rateLimitCheck.allowed) {\r\n      return NextResponse.json(\r\n        { success: false, message: 'Rate limit exceeded' },\r\n        { status: 429 }\r\n      );\r\n    }\r\n\r\n    const role = getRoleFromRequest(request);\r\n\r\n    if (!['Administrator', 'Manager', 'ADM_INV'].includes(role || '')) {\r\n      return NextResponse.json(\r\n        { success: false, message: 'Unauthorized: insufficient permissions', error_code: 'UNAUTHORIZED' },\r\n        { status: 403 }\r\n      );\r\n    }\r\n\r\n    const productId = Number(id);\r\n\r\n    // SOFT DELETE: cambiar active a false en lugar de borrar\r\n    const result = await sql`\r\n      UPDATE products\r\n      SET active = false, updated_at = NOW()\r\n      WHERE id = ${productId} AND active = true\r\n      RETURNING id, name\r\n    `;\r\n\r\n    if (result.length === 0) {\r\n      return NextResponse.json(\r\n        { success: false, message: 'Product not found or already deleted', error_code: 'NOT_FOUND' },\r\n        { status: 404 }\r\n      );\r\n    }\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      message: 'Product deleted successfully',\r\n      product: result[0]\r\n    });\r\n  } catch (error) {\r\n    console.error('[Delete Product Error]', error);\r\n    return NextResponse.json(\r\n      { success: false, message: 'Error deleting product', error_code: 'DELETE_ERROR' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}"],"names":[],"mappings":"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"}}]
}